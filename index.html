
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Iroha API reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
    <script>
      ((window.gitter = {}).chat = {}).options = {
        room: 'hyperledger-iroha/Lobby'
      };
    </script>
  <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
</head>

  <body class="index" data-languages="[&quot;protobuf&quot;,&quot;json&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="protobuf">protobuf</a>
              <a href="#" data-language-name="json">json</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#overview" class="toc-h1 toc-link" data-title="Overview">Overview</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#elevator-pitch-for-iroha" class="toc-h2 toc-link" data-title="Overview">Elevator pitch for Iroha</a>
                  </li>
                  <li>
                    <a href="#purpose-of-the-docs-you-are-reading" class="toc-h2 toc-link" data-title="Overview">Purpose of the docs you are reading</a>
                  </li>
                  <li>
                    <a href="#try-it-yourself" class="toc-h2 toc-link" data-title="Overview">Try it yourself</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#build" class="toc-h1 toc-link" data-title="Build">Build</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#docker" class="toc-h2 toc-link" data-title="Build">Docker</a>
                  </li>
                  <li>
                    <a href="#linux-or-macos" class="toc-h2 toc-link" data-title="Build">Linux or macOS</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#run-the-daemon-irohad" class="toc-h1 toc-link" data-title="Run the daemon (irohad)">Run the daemon (irohad)</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-genesis-block" class="toc-h2 toc-link" data-title="Run the daemon (irohad)">Create genesis block</a>
                  </li>
                  <li>
                    <a href="#prepare-configuration-file" class="toc-h2 toc-link" data-title="Run the daemon (irohad)">Prepare configuration file</a>
                  </li>
                  <li>
                    <a href="#launch-irohad" class="toc-h2 toc-link" data-title="Run the daemon (irohad)">Launch irohad</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#block-structure" class="toc-h1 toc-link" data-title="Block structure">Block structure</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#outside-payload" class="toc-h2 toc-link" data-title="Block structure">Outside payload</a>
                  </li>
                  <li>
                    <a href="#inside-payload" class="toc-h2 toc-link" data-title="Block structure">Inside payload</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#transactions" class="toc-h1 toc-link" data-title="Transactions">Transactions</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#transaction-structure" class="toc-h2 toc-link" data-title="Transactions">Transaction structure</a>
                  </li>
                  <li>
                    <a href="#transaction-statuses" class="toc-h2 toc-link" data-title="Transactions">Transaction statuses</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#commands" class="toc-h1 toc-link" data-title="Commands">Commands</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#add-asset-quantity" class="toc-h2 toc-link" data-title="Commands">Add asset quantity</a>
                  </li>
                  <li>
                    <a href="#add-peer" class="toc-h2 toc-link" data-title="Commands">Add peer</a>
                  </li>
                  <li>
                    <a href="#add-signatory" class="toc-h2 toc-link" data-title="Commands">Add signatory</a>
                  </li>
                  <li>
                    <a href="#append-role" class="toc-h2 toc-link" data-title="Commands">Append role</a>
                  </li>
                  <li>
                    <a href="#create-account" class="toc-h2 toc-link" data-title="Commands">Create account</a>
                  </li>
                  <li>
                    <a href="#create-asset" class="toc-h2 toc-link" data-title="Commands">Create asset</a>
                  </li>
                  <li>
                    <a href="#create-domain" class="toc-h2 toc-link" data-title="Commands">Create domain</a>
                  </li>
                  <li>
                    <a href="#create-role" class="toc-h2 toc-link" data-title="Commands">Create role</a>
                  </li>
                  <li>
                    <a href="#detach-role" class="toc-h2 toc-link" data-title="Commands">Detach role</a>
                  </li>
                  <li>
                    <a href="#grant-permission" class="toc-h2 toc-link" data-title="Commands">Grant permission</a>
                  </li>
                  <li>
                    <a href="#remove-signatory" class="toc-h2 toc-link" data-title="Commands">Remove signatory</a>
                  </li>
                  <li>
                    <a href="#revoke-permission" class="toc-h2 toc-link" data-title="Commands">Revoke permission</a>
                  </li>
                  <li>
                    <a href="#set-account-detail" class="toc-h2 toc-link" data-title="Commands">Set account detail</a>
                  </li>
                  <li>
                    <a href="#set-account-quorum" class="toc-h2 toc-link" data-title="Commands">Set account quorum</a>
                  </li>
                  <li>
                    <a href="#subtract-asset-quantity" class="toc-h2 toc-link" data-title="Commands">Subtract asset quantity</a>
                  </li>
                  <li>
                    <a href="#transfer-asset" class="toc-h2 toc-link" data-title="Commands">Transfer asset</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#queries" class="toc-h1 toc-link" data-title="Queries">Queries</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#query-structure" class="toc-h2 toc-link" data-title="Queries">Query structure</a>
                  </li>
                  <li>
                    <a href="#validation" class="toc-h2 toc-link" data-title="Queries">Validation</a>
                  </li>
                  <li>
                    <a href="#get-account" class="toc-h2 toc-link" data-title="Queries">Get account</a>
                  </li>
                  <li>
                    <a href="#get-signatories" class="toc-h2 toc-link" data-title="Queries">Get signatories</a>
                  </li>
                  <li>
                    <a href="#get-account-transactions" class="toc-h2 toc-link" data-title="Queries">Get account transactions</a>
                  </li>
                  <li>
                    <a href="#get-account-asset-transactions" class="toc-h2 toc-link" data-title="Queries">Get account asset transactions</a>
                  </li>
                  <li>
                    <a href="#get-transactions" class="toc-h2 toc-link" data-title="Queries">Get transactions</a>
                  </li>
                  <li>
                    <a href="#get-account-assets" class="toc-h2 toc-link" data-title="Queries">Get account assets</a>
                  </li>
                  <li>
                    <a href="#get-asset-info" class="toc-h2 toc-link" data-title="Queries">Get asset info</a>
                  </li>
                  <li>
                    <a href="#get-roles" class="toc-h2 toc-link" data-title="Queries">Get roles</a>
                  </li>
                  <li>
                    <a href="#get-role-permissions" class="toc-h2 toc-link" data-title="Queries">Get role permissions</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#entity-relationship-model" class="toc-h1 toc-link" data-title="Entity-relationship model">Entity-relationship model</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#peer" class="toc-h2 toc-link" data-title="Entity-relationship model">Peer</a>
                  </li>
                  <li>
                    <a href="#asset" class="toc-h2 toc-link" data-title="Entity-relationship model">Asset</a>
                  </li>
                  <li>
                    <a href="#signatory" class="toc-h2 toc-link" data-title="Entity-relationship model">Signatory</a>
                  </li>
                  <li>
                    <a href="#domain" class="toc-h2 toc-link" data-title="Entity-relationship model">Domain</a>
                  </li>
                  <li>
                    <a href="#role" class="toc-h2 toc-link" data-title="Entity-relationship model">Role</a>
                  </li>
                  <li>
                    <a href="#account" class="toc-h2 toc-link" data-title="Entity-relationship model">Account</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#command-line-interface" class="toc-h1 toc-link" data-title="Command Line Interface">Command Line Interface</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#keypair-generation" class="toc-h2 toc-link" data-title="Command Line Interface">Keypair generation</a>
                  </li>
                  <li>
                    <a href="#interactive-mode" class="toc-h2 toc-link" data-title="Command Line Interface">Interactive mode </a>
                  </li>
                  <li>
                    <a href="#starting-menu" class="toc-h2 toc-link" data-title="Command Line Interface">Starting menu </a>
                  </li>
                  <li>
                    <a href="#transaction-cli" class="toc-h2 toc-link" data-title="Command Line Interface">Transaction CLI</a>
                  </li>
                  <li>
                    <a href="#query-cli" class="toc-h2 toc-link" data-title="Command Line Interface">Query CLI</a>
                  </li>
              </ul>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='https://github.com/hyperledger/iroha'>Hyperledger Iroha GitHub</a></li>
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='overview'>Overview</h1>
<p>Welcome to the Hyperledger Iroha API docs!</p>
<h2 id='elevator-pitch-for-iroha'>Elevator pitch for Iroha</h2>
<p>The system is a distributed ledger platform, capable of storing all history of state-changing actions (called transactions) in immutable linear history (called blockchain). The system is intended to be used in enterprise or between untrusted agents as <strong>private chain platform</strong>, but not as a public chain — key difference is that not everyone is allowed to store the whole history. A subset of users can only query some data (perform a query) if their accounts have required permissions, while others maintain a peer (Iroha is a peer network), which stores history. </p>

<p>Reliability and security are provided with cryptographic capabilities and <strong>Byzantine Fault Tolerant</strong> consensus algorithm. The system is targeted to environments, where client applications are very diverse (desktop, various mobile platforms), and peer hardware varies from embedded systems to enterprise-class servers.</p>
<h2 id='purpose-of-the-docs-you-are-reading'>Purpose of the docs you are reading</h2>
<p>The documentation describes the endpoints for users to send transactions to peer network, containing one or many commands to perform allowed actions in the system, and also make queries to know the current state. Also the documentation contains explanation how to build the system, how to run it and other applicable tutorials. </p>

<p>The API is organized around protobuf format, as Iroha is using gRPC in transport level. Iroha CLI and block store use JSON format to provide developer-friendly experience for contributors. Feel free to check both sections for protobuf and JSON while exploring docs.</p>
<h2 id='try-it-yourself'>Try it yourself</h2>
<p>To try out a basic API functionality, do the following:</p>

<aside class="notice">
In case you have troubles understanding some specific terminology used — refer to the <a href="#glossary">glossary</a>.
</aside>

<ol>
<li>Run the system (<code>irohad</code> daemon) on a single node.</li>
<li>Run iroha-cli in interactive mode. Command Line Interface app is a client, showing the capabilities of the system.</li>
<li>Select a necessary action to perform. As you created an initial configuration in genesis block — use the account from genesis block to send transaction or make a query.</li>
<li>When you fill all the necessary details for commands and formed a transaction; or if you formed a query — you are ready to send it to Iroha peer. Tell the network address and port (by default it is 50051).</li>
</ol>

<aside class="success">
If everything went well and you were successful to form transaction or query with valid fields — you will get either transaction hash, which is used for querying transaction state, or query response object (see query subsection for more details).
</aside>
<h1 id='build'>Build</h1>
<p>To launch Iroha peer network, an executable daemon should be launched. Currently we support Unix-like systems (we are basically targeting at popular Linux distros and macOS), while Windows remains to be a challenge for community and we don&#39;t have any plans to support it so far.</p>

<p>If you happen to have Windows or you don&#39;t want to spend time figuring out troubles with dependencies on your system — please use Docker environment, made with care for new contributors of Iroha (and hostages of Windows).</p>
<h2 id='docker'>Docker</h2>
<p>Please, use latest available docker daemon and docker-compose. If you have troubles launching Docker container — it is likely that you have an outdated version.</p>
<h3 id='clone-git-repository'>Clone Git repository</h3>
<p>Clone Iroha <a href="https://github.com/hyperledger/iroha">repository</a> in any convenient folder on your machine.</p>

<blockquote>
<p>Cloning Iroha</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>git clone -b develop --depth<span class="o">=</span>1 <span class="se">\</span>
https://github.com/hyperledger/iroha
</code></pre><h3 id='how-to-run-development-environment'>How to run development environment</h3>
<p>Run the script <code>run-iroha-dev.sh</code>, contained in the folder <code>scripts</code>: <code>sh .../iroha/scripts/run-iroha-dev.sh</code></p>

<p>After you execute this script, following things happen:</p>

<ol>
<li>The script checks if you don&#39;t have containers with Iroha already running. It ends up with reattaching you to interactive shell upon succesful completion.</li>
<li>The script will download iroha-docker-develop, redis and postgres images. Iroha image contains all development dependencies, and is based on top of ubuntu:16.04.</li>
<li>Three containers are created and launched.</li>
<li>The user is attached to the interactive environment for development and testing with <code>iroha</code> folder mounted from the host machine. Iroha folder is mounted to <code>/opt/iroha</code> in Docker container.</li>
</ol>

<aside class="notice">
Docker environment will be removed when you detach from the container.
</aside>
<h3 id='build-project-and-run-tests'>Build project and run tests</h3>
<blockquote>
<p>Build</p>
</blockquote>
<pre class="highlight shell"><code>cmake -H. -Bbuild;
cmake --build build -- -j<span class="k">$(</span>nproc<span class="k">)</span>
</code></pre>
<aside class="notice">
On macOS $(nproc) variable does not work. Check number of logical cores with <code>sysctl -n hw.ncpu</code>
</aside>

<p>Run shell commands from &quot;Build&quot; section on the right. Built binaries (<code>irohad</code> and <code>iroha-cli</code>) will be in <code>./build/bin</code> directory.</p>

<p>After you built the project — please run tests to check the operability of the daemon.</p>
<h3 id='cmake-parameters'>Cmake parameters</h3>
<p>We use CMake to build platform-dependent build files. It has numerous of the flags for configuring the final build. Note that beside the listed params <a href="https://cmake.org/Wiki/CMake_Useful_Variables">cmake&#39;s vars</a> can be useful as well. Also as long as this page can be deprecated (or just not complete) you can browse custom flags via <code>cmake -L</code>, <code>cmake-gui</code>, or <code>ccmake</code>.</p>

<aside class="notice">
You can specify parameters at the <code>cmake</code> configuring stage (e.g <code>cmake -DTESTING=ON</code>).
</aside>
<h4 id='main-params'>Main params</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Possible values</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>TESTING</td>
<td>ON/OFF</td>
<td>ON</td>
<td>Enables or disables build of the tests</td>
</tr>
<tr>
<td>BENCHMARKING</td>
<td>ON/OFF</td>
<td>OFF</td>
<td>Enables or disables build of the benchmarks</td>
</tr>
<tr>
<td>COVERAGE</td>
<td>ON/OFF</td>
<td>OFF</td>
<td>Enables or disables coverage</td>
</tr>
<tr>
<td>SWIG_PYTHON</td>
<td>ON/OFF</td>
<td>OFF</td>
<td>Enables or disables libraries and native interface bindings for python</td>
</tr>
<tr>
<td>SWIG_JAVA</td>
<td>ON/OFF</td>
<td>OFF</td>
<td>Enables or disables libraries and native interface bindings for java</td>
</tr>
</tbody></table>
<h4 id='packaging-specific-params'>Packaging specific params</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Possible values</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ENABLE_LIBS_PACKAGING</td>
<td>ON/OFF</td>
<td>ON</td>
<td>Enables or disables all types of packaging</td>
</tr>
<tr>
<td>PACKAGE_ZIP</td>
<td>ON/OFF</td>
<td>OFF</td>
<td>Enables or disables zip packaging</td>
</tr>
<tr>
<td>PACKAGE_TGZ</td>
<td>ON/OFF</td>
<td>OFF</td>
<td>Enables or disables tar.gz packaging</td>
</tr>
<tr>
<td>PACKAGE_RPM</td>
<td>ON/OFF</td>
<td>OFF</td>
<td>Enables or disables rpm packaging</td>
</tr>
<tr>
<td>PACKAGE_DEB</td>
<td>ON/OFF</td>
<td>OFF</td>
<td>Enables or disables deb packaging</td>
</tr>
</tbody></table>
<h3 id='add-to-irohad-and-iroha-cli-to-path-optional'>Add to irohad and iroha-cli to path (optional)</h3>
<p><code>export PATH=.../iroha/build/bin:$PATH</code></p>

<aside class="notice">
Write this to your shell configuration to make it persistent.
</aside>

<blockquote>
<p>How to run tests method #1</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>cmake --build build --target <span class="nb">test</span>
</code></pre>
<blockquote>
<p>How to run tests method #2</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>ctest . <span class="c"># in build folder</span>
</code></pre><h3 id='execute-code-iroha-cli-code-with-code-irohad-code-running'>Execute <code>iroha-cli</code> with <code>irohad</code> running</h3>
<p>Execute <code>run-iroha-dev.sh</code> again to attach to existing container.</p>
<h2 id='linux-or-macos'>Linux or macOS</h2>
<blockquote>
<p>Launching Docker and Postgres in Docker</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>docker run --name some-redis <span class="se">\</span>
-p 6379:6379 <span class="se">\</span>
-d redis:3.2.8

docker run --name some-postgres <span class="se">\</span>
-e <span class="nv">POSTGRES_USER</span><span class="o">=</span>postgres <span class="se">\</span>
-e <span class="nv">POSTGRES_PASSWORD</span><span class="o">=</span>mysecretpassword <span class="se">\</span>
-p 5432:5432 <span class="se">\</span>
-d postgres:9.5
</code></pre>
<p>To launch Iroha daemon, running postgres and redis services are required. You may launch them on your local machine, or use docker containers, as provided on the right side.</p>
<h3 id='linux-debian-based'>Linux (debian-based)</h3>
<p>To install dependencies, clone, and build the project, please use this code:
<script src="https://gist.github.com/neewy/39557aa444c3317aeffbdedd9f0f51e2.js"></script></p>
<h4 id='outdated-dependencies'>Outdated dependencies</h4>
<p>In case that some dependencies are outdated in apt, you are advised to use following sources to install dependencies:</p>
<h5 id='boost'>Boost</h5>
<p>To install Boost libraries (<code>libboost-all-dev</code>), use <a href="http://www.boost.org/users/download/">current release</a> from Boost webpage, or use <a href="https://packages.debian.org/sid/libboost-all-dev">debian repository</a> for latest library.
The only dependencies are system and filesystem, so use <code>./bootstrap.sh --with-libraries=system,filesystem</code> when you are building the project.</p>
<h5 id='cmake'>CMake</h5>
<p>To install CMake tool (<code>cmake</code>), use <a href="https://cmake.org/download/">latest release</a> from CMake webpage.</p>
<h3 id='macos'>macOS</h3>
<blockquote>
<p>macOS brew</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>brew tap soramitsu/iroha
brew install iroha
</code></pre>
<p>To install dependencies, clone, and build the project, please use this code:
<script src="https://gist.github.com/neewy/bc0fea777592a5381aa4ab6e68bfe699.js"></script></p>
<h1 id='run-the-daemon-irohad'>Run the daemon (irohad)</h1><h2 id='create-genesis-block'>Create genesis block</h2>
<p>A genesis block is the first block in the chain.</p>

<p><b>Important:</b> each peer in the initialized network should have exactly the same genesis block, so create it once and distribute across peers. This block may have <b>any</b> data, as no-one validates it in the peer network.</p>
<h3 id='using-iroha-cli'>Using iroha-cli</h3><h4 id='create-list-of-peers'>Create list of peers</h4>
<p>Create peers.list file containing network addresses of peers&#39; internal ports in the network (<code>10001</code> by default) a single peer address goes on new line. If you want to run Iroha on single peer, it is sufficient to mention only localhost: <br> <code>$ echo &#39;localhost:10001&#39; &gt; peers.list</code></p>

<p>As an example, for 4 peers the file will look like the following:
<ul>
  <li>10.128.13.1:10001</li>
  <li>10.128.13.2:10001</li>
  <li>10.128.13.3:10001</li>
  <li>10.128.13.4:10001</li>
</ul></p>

<aside class="notice">
Internal port is used for communication of internal components. Each peer potentially may have different, adjustable internal port numbers.
</aside>
<h4 id='use-iroha-cli'>Use iroha-cli</h4>
<p>Generate genesis block using iroha-cli (see shell command on the right side).</p>

<p>Iroha-cli tool is used to generate keypairs for every peer, mentioned in the peers list. This is done only for convenience — in production environment please consider using manual or more trusted approach.</p>

<blockquote>
<p>Generating genesis block</p>
</blockquote>
<pre class="highlight shell"><code><span class="gp">$ </span>iroha-cli --genesis_block <span class="se">\ </span>
--peers_address peers.list
</code></pre>
<p>Executing this command will result in generation of following files:</p>

<ul>
<li><code>admin@test.priv</code> and <code>admin@test.pub</code> — keypair for user with admin and asset creator rights</li>
<li><code>test@test.priv</code> and <code>test@test.pub</code> — keypair for user with user rights</li>
<li><code>node0.priv</code> and <code>node0.pub</code> — keypair for first node, mentioned in the <code>peers.list</code></li>
<li>If mentioned more than one peer address in <code>peers.list</code>: <code>nodeX.priv</code> and <code>nodeX.pub</code> — keypair for #X node, mentioned in the peers.list, (where X is starts from 1) </li>
<li><code>genesis.block</code> — genesis block itself</li>
</ul>

<aside class="notice">
What are those asset creator, admin, user rights? Iroha supports role-based access control, so initial roles for accounts should be created in genesis block. Check <a href="#permission-model">permission model</a> section of the documentation to find out more. 
</aside>
<h3 id='manually'>Manually</h3>
<p>Follow JSON structure of the block, as it is reflected in <a href="https://gist.github.com/neewy/4e347bc8493951733998e01af633dbbb">JSON schema for the block</a>.</p>
<h2 id='prepare-configuration-file'>Prepare configuration file</h2>
<p>Configuration file keeps information about storage credentials and irohad parameters:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>block_store_path</td>
<td>string</td>
<td>Path to store blocks of committed transactions (flat file storage)</td>
</tr>
<tr>
<td>torii_port</td>
<td>integer</td>
<td>Port to access iroha node gRPC (default 50051)</td>
</tr>
<tr>
<td>internal_port</td>
<td>integer</td>
<td>Port for communication between ordering service, YAC consensus and block loader for synchronization (default 10001)</td>
</tr>
<tr>
<td>pg_opt</td>
<td>string</td>
<td>Postgres credentials</td>
</tr>
<tr>
<td>redis_host</td>
<td>string</td>
<td>Redis host IP address</td>
</tr>
<tr>
<td>redis_port</td>
<td>integer</td>
<td>Port to access redis storage</td>
</tr>
<tr>
<td>max_proposal_size</td>
<td>integer</td>
<td>Maximum size of created proposals</td>
</tr>
<tr>
<td>proposal_delay</td>
<td>integer</td>
<td>The period of time (in ms) used to prepare proposal of transactions</td>
</tr>
<tr>
<td>vote_delay</td>
<td>integer</td>
<td>The period of time (in ms) of spreading vote across the network</td>
</tr>
<tr>
<td>load_delay</td>
<td>integer</td>
<td>The period of time (in ms) between synchronizations between peers</td>
</tr>
</tbody></table>

<p>Example:</p>

<script src="https://gist.github.com/neewy/1ebe653de074dac1675f74eb19824b2e.js"></script>
<h2 id='launch-irohad'>Launch irohad</h2>
<p>To launch irohad daemon, following parameters must be passed:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>config</td>
<td>configuration file, containing postgres, and redis connection, and values to tune the system</td>
</tr>
<tr>
<td>genesis_block</td>
<td>initial block in the ledger</td>
</tr>
<tr>
<td>keypair_name</td>
<td>private and public key file names without file extension. Used by peer to sign the blocks</td>
</tr>
</tbody></table>

<p>Use this command to launch iroha:</p>

<p><code>irohad --config example/config.sample --genesis_block example/genesis.block --keypair_name example/node0</code></p>
<h1 id='block-structure'>Block structure</h1>
<p><img src="images/block.png" title="Block structure" alt="Block" /></p>

<p>In order to understand contents of the block better, this section tells about its parts:</p>
<h3 id='outside-payload'>Outside payload</h3>
<ul>
<li>hash — SHA3-512 hash of block protobuf payload</li>
<li>signatures — signatures of peers, which voted for the block during consensus round</li>
</ul>
<h3 id='inside-payload'>Inside payload</h3>
<ul>
<li>height — a quantity of blocks in the chain up to the block</li>
<li>timestamp — unix time (in millis) of block forming by a peer</li>
<li>body — transactions, which successfully passed validation and consensus step</li>
<li>transactions quantity</li>
<li>previous hash of block</li>
</ul>
<h1 id='transactions'>Transactions</h1>
<blockquote>
<p>Transaction </p>
</blockquote>
<pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">Transaction</span> <span class="p">{</span>
  <span class="n">Payload</span> <span class="na">payload</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">repeated</span> <span class="n">Signature</span> <span class="na">signature</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
 <span class="p">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="err">/*</span><span class="w"> </span><span class="err">Transaction</span><span class="w"> </span><span class="err">*/</span><span class="w">
    </span><span class="s2">"signatures"</span><span class="p">:</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">objects</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_ts"</span><span class="p">:</span><span class="w"> </span><span class="err">int(</span><span class="mi">13</span><span class="err">)</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creator_account_id"</span><span class="p">:</span><span class="w"> </span><span class="err">string(?)</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tx_counter"</span><span class="p">:</span><span class="w"> </span><span class="err">int</span><span class="p">,</span><span class="w">
    </span><span class="s2">"commands"</span><span class="p">:</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">objects</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A transaction is a state-changing set of actions in the system. When a transaction passes validation and consensus stages, it is written in a block and saved in immutable block store (blockchain). </p>

<p>Transactions consist of commands, performing an action over an entity in the system. The entity might be an account, asset, etc. — more in <a href="#er-model">entity-relationship model</a> page. </p>

<aside class="notice">
Iroha API follows command-query separation principle, which is described <a href="https://en.wikipedia.org/wiki/Command–query_separation">here</a>.
</aside>

<p>Communication between Iroha peer and a client application is maintained via <a href="https://grpc.io/about/">gRPC framework</a>. 
Client applications should follow described protocol and form transactions accordingly to the description below.</p>
<h2 id='transaction-structure'>Transaction structure</h2>
<p>Each transaction consists of two parts:
<ul>
    <li> Payload </li> 
    <li> Signature </li> 
</ul></p>

<blockquote>
<p>Payload</p>
</blockquote>
<pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">Payload</span> <span class="p">{</span>
  <span class="k">repeated</span> <span class="n">Command</span> <span class="na">commands</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kt">string</span> <span class="na">creator_account_id</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="kt">uint64</span> <span class="na">tx_counter</span>  <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
  <span class="kt">uint64</span> <span class="na">created_time</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"commands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"command_type"</span><span class="p">:</span><span class="w"> </span><span class="err">string(?)</span><span class="p">,</span><span class="w">
            </span><span class="err">/*</span><span class="w"> </span><span class="err">other</span><span class="w"> </span><span class="err">command-specific</span><span class="w"> </span><span class="err">fields</span><span class="w"> </span><span class="err">*/</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"creator_account_id"</span><span class="p">:</span><span class="w"> </span><span class="err">string(?)</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tx_counter"</span><span class="p">:</span><span class="w"> </span><span class="err">int</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_ts"</span><span class="p">:</span><span class="w"> </span><span class="err">int(</span><span class="mi">13</span><span class="err">)</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Signature </p>
</blockquote>
<pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">Signature</span> <span class="p">{</span>
   <span class="kt">bytes</span> <span class="na">pubkey</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="kt">bytes</span> <span class="na">signature</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"signatures"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"pubkey"</span><span class="p">:</span><span class="w"> </span><span class="err">string(</span><span class="mi">64</span><span class="err">)</span><span class="p">,</span><span class="w">
            </span><span class="s2">"signature"</span><span class="p">:</span><span class="w"> </span><span class="err">string(</span><span class="mi">128</span><span class="err">)</span><span class="p">,</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w"> </span><span class="err">…</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Payload</strong> stores all transaction fields, except signatures: 
<ul>
    <li> Time of creation (unix time, in milliseconds) </li> 
    <li> Account ID of transaction creator (username@domain) </li>
    <li> Transaction counter. It counts how many times transaction creator sent transactions in total. Counter is used to prevent replay attack, and is formed on client side </li>
    <li> Repeated commands which are described in details in <a href="#commands">commands section</a> </li> 
</ul></p>

<p><strong>Signatures</strong> contain one or many signatures (ed25519 public key + signature):</p>

<aside class="notice">
In the current version, there is no way to get current transaction counter by any means. You have to remember it on a client side and increment it. In a future version, this will be changed, and client application may retrieve this information.
</aside>
<h2 id='transaction-statuses'>Transaction statuses</h2>
<p>The current version of Iroha peer follows client <a href="https://en.wikipedia.org/wiki/Pull_technology">pull principle</a> for networking. It means that client should be proactive and request the state of a transaction from a peer. </p>

<p>This section describes the set of states and matches them with transaction lifecycle.</p>

<p><img src="images/tx_status.png" title="Block structure" alt="Block" /></p>

<ul>
<li><code>NOT_RECEIVED</code>: the peer does not have this transaction.</li>
<li><code>STATELESS_VALIDATION_FAILED</code>: the transaction was formed with some fields, not meeting constraints. This status is returned to a client, who formed transaction, right after the transaction was sent. </li>
<li><code>STATELESS_VALIDATION_SUCCESS</code>: the transaction has successfully passed stateless validation. This status is returned to a client, who formed transaction, right after the transaction was sent. </li>
<li><code>STATEFUL_VALIDATION_FAILED</code>: the transaction has commands, which violate validation rules, checking state of the chain (e.g. asset balance, account permissions, etc.) </li>
<li><code>STATEFUL_VALIDATION_SUCCESS</code>: the transaction has successfully passed stateful validation.</li>
<li><code>IN_PROGRESS</code>: the transaction was received, but not yet processed by stateless validator</li>
<li><code>COMMITTED</code>: the transaction is the part of a block, which gained enough votes and is in the block store at the moment. </li>
</ul>
<h1 id='commands'>Commands</h1>
<p>A command changes the state, called World State View, by performing an action over an entity (asset, account) in the system. Any command should be included in a transaction to perform an action.</p>
<h2 id='add-asset-quantity'>Add asset quantity</h2><h3 id='purpose'>Purpose</h3>
<p>The purpose of <em>add asset quantity</em> command is to increase the quantity of an asset on account of transaction creator. Use case scenario is to increase the number of mutable asset in the system, which can act as a claim on a commodity (e.g. money, gold, etc.)</p>
<h3 id='structure'>Structure</h3><pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">AddAssetQuantity</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="na">account_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">string</span> <span class="na">asset_id</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">Amount</span> <span class="na">amount</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">message</span> <span class="nc">uint256</span> <span class="p">{</span>
   <span class="kt">uint64</span> <span class="na">first</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="kt">uint64</span> <span class="na">second</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
   <span class="kt">uint64</span> <span class="na">third</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
   <span class="kt">uint64</span> <span class="na">fourth</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">message</span> <span class="nc">Amount</span> <span class="p">{</span>
   <span class="n">uint256</span> <span class="na">value</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="kt">uint32</span> <span class="na">precision</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>

</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"commands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"command_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AddAssetQuantity"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@test"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"asset_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coin#test"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="err">string</span><span class="p">,</span><span class="w">
                </span><span class="s2">"precision"</span><span class="p">:</span><span class="w"> </span><span class="err">int</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w"> </span><span class="err">…</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Account ID</td>
<td>account id in which to add asset</td>
<td>account_name@domain</td>
</tr>
<tr>
<td>Asset ID</td>
<td>id of the asset</td>
<td>asset#account</td>
</tr>
<tr>
<td>Amount</td>
<td>positive amount of the asset to add</td>
<td>&gt; 0</td>
</tr>
</tbody></table>
<h3 id='validation'>Validation</h3>
<ol>
<li>Asset and account should exist</li>
<li>Added quantity precision should be equal to asset precision</li>
<li>Creator of transaction should have role which has permissions for issuing assets</li>
<li>Creator of transaction adds account quantity to his/her account only</li>
</ol>
<h2 id='add-peer'>Add peer</h2><h3 id='purpose-2'>Purpose</h3>
<p>The purpose of <em>add peer</em> command is to write into ledger the fact of peer addition into the peer network. After the peer was added, consensus and synchronization components will start using it.</p>
<h3 id='structure-2'>Structure</h3><pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">AddPeer</span> <span class="p">{</span>
    <span class="n">Peer</span> <span class="na">peer</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">message</span> <span class="nc">Peer</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="na">address</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">bytes</span> <span class="na">peer_key</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"commands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"command_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AddPeer"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"peer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"192.168.1.1:50001"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"peer_key"</span><span class="p">:</span><span class="w"> </span><span class="err">string(</span><span class="mi">64</span><span class="err">)</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
    </span><span class="p">],</span><span class="w"> </span><span class="err">…</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Address</td>
<td>resolvable address in network (IPv4, IPv6, domain name, etc.)</td>
<td>should be resolvable</td>
</tr>
<tr>
<td>Peer key</td>
<td>peer public key, which will be used in consensus algorithm to sign-off vote, commit, reject messages</td>
<td>ed25519 public key</td>
</tr>
</tbody></table>
<h3 id='validation-2'>Validation</h3>
<ol>
<li>Creator of the transaction has a role which has CanAddPeer permission.</li>
<li>Such network address has not been already added.</li>
</ol>
<h2 id='add-signatory'>Add signatory</h2><h3 id='purpose-3'>Purpose</h3>
<p>The purpose of <em>add signatory</em> command is to add an identifier to the account. Such identifier is a public key of another device or a public key of another user.</p>
<h3 id='structure-3'>Structure</h3><pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">AddSignatory</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="na">account_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">bytes</span> <span class="na">public_key</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"commands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"command_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AddSignatory"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@test"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"public_key"</span><span class="p">:</span><span class="w"> </span><span class="err">string(</span><span class="mi">64</span><span class="err">)</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w"> </span><span class="err">…</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Account ID</td>
<td>Account to which to add signatory</td>
<td>account_name@domain</td>
</tr>
<tr>
<td>Public key</td>
<td>Signatory to add to account</td>
<td>ed25519 public key</td>
</tr>
</tbody></table>
<h3 id='validation-3'>Validation</h3>
<p>Two cases:
Case 1. Transaction creator wants to add signatory to his or her account, having permission CanAddSignatory
Case 2. CanAddSignatory was granted to transaction creator</p>

<aside class="notice">
Granting specific rights in the system allows other account to perform actions over the account, which granted such rights. They can be revoked if needed, and for more information — please check <a href="#permission-model">permission model</a> section.
</aside>
<h2 id='append-role'>Append role</h2><h3 id='purpose-4'>Purpose</h3>
<p>The purpose of <em>append role</em> command is to promote an account to some created role in the system, where role is a set of permissions account has to perform an action (command or query).</p>
<h3 id='structure-4'>Structure</h3><pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">AppendRole</span> <span class="p">{</span>
   <span class="kt">string</span> <span class="na">account_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="kt">string</span> <span class="na">role_name</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"commands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"command_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AppendRole"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"takemiya@test"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"role_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Administrator"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w"> </span><span class="err">…</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Account ID</td>
<td>id or account to append role to</td>
<td>already existent, account_name@domain</td>
</tr>
<tr>
<td>Role name</td>
<td>name of already created role</td>
<td>already existent, <code>[A-Za-z0-9_]{1,7}</code></td>
</tr>
</tbody></table>
<h3 id='validation-4'>Validation</h3>
<ol>
<li>Role should exist in the system</li>
<li>Transaction creator should have permissions to append role (CanAppendRole)</li>
<li>Account, which appends role, has set of permissions in his roles bigger than or equal to the size of permission set of appended role.</li>
</ol>
<h2 id='create-account'>Create account</h2><h3 id='purpose-5'>Purpose</h3>
<p>The purpose of <em>create account</em> command is to make entity in the system, capable of sending transactions or queries, storing signatories, personal data and identifiers.</p>
<h3 id='structure-5'>Structure</h3><pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">CreateAccount</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="na">account_name</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">string</span> <span class="na">domain_id</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kt">bytes</span> <span class="na">main_pubkey</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"commands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"command_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CreateAccount"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"account_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"makoto.takemiya"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"domain_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"main_pubkey"</span><span class="p">:</span><span class="w"> </span><span class="err">string</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w"> </span><span class="err">…</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Account name</td>
<td>domain-unique name for account</td>
<td>A string in domain-name syntax defined in RFC1035. An account name is a list of labels separated by a period <code>.</code>. A label is a sequence of characters in <code>[a-zA-Z-]</code>. The length of a label must not exceed 63 characters</td>
</tr>
<tr>
<td>Domain ID</td>
<td>target domain to make relation with</td>
<td>should be created before the account, <code>[0-9A-Za-z]{1,9}</code></td>
</tr>
<tr>
<td>Main pubkey</td>
<td>first public key to add to the account</td>
<td>ed25519 public key</td>
</tr>
</tbody></table>
<h3 id='validation-5'>Validation</h3>
<ol>
<li>Transaction creator has permission to create account</li>
<li>Domain, passed as domain_id, has already been created in the system</li>
<li>Such public key has not been added before as first public key of account or added to multi-signature account </li>
</ol>
<h2 id='create-asset'>Create asset</h2><h3 id='purpose-6'>Purpose</h3>
<p>The purpose of <em>сreate asset</em> command is to create a new type of asset, unique in a domain. An asset is a countable representation of a commodity. </p>
<h3 id='structure-6'>Structure</h3><pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">CreateAsset</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="na">asset_name</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">string</span> <span class="na">domain_id</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kt">uint32</span> <span class="na">precision</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"commands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"command_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CreateAsset"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"asset_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usd"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"domain_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"precision"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w"> </span><span class="err">…</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Asset name</td>
<td>domain-unique name for asset</td>
<td><code>[A-Za-z0-9]{1,9}</code></td>
</tr>
<tr>
<td>Domain ID</td>
<td>target domain to make relation with</td>
<td>should be created before the asset, <code>[A-Za-z0-9]{1,9}</code></td>
</tr>
<tr>
<td>Precision</td>
<td>number of digits after comma/dot</td>
<td>0 &lt;= precision &lt;= uint32 max</td>
</tr>
</tbody></table>
<h3 id='validation-6'>Validation</h3>
<ol>
<li>Transaction creator has permission to create assets</li>
<li>Asset name is unique per domain</li>
</ol>
<h2 id='create-domain'>Create domain</h2><h3 id='purpose-7'>Purpose</h3>
<p>The purpose of <em>create domain</em> command is to make new domain in Iroha network, which is a group of accounts.</p>
<h3 id='structure-7'>Structure</h3><pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">CreateDomain</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="na">domain_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">string</span> <span class="na">default_role</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"commands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"command_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CreateDomain"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"domain_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test2"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"default_role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w"> </span><span class="err">…</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Domain ID</td>
<td>ID for created domain</td>
<td>unique, <code>[0-9A-Za-z]{1,9}</code></td>
</tr>
<tr>
<td>Default role</td>
<td>role for any created user in the domain</td>
<td>one of the existing roles</td>
</tr>
</tbody></table>
<h3 id='validation-7'>Validation</h3>
<ol>
<li><em>domain id</em> is unique</li>
<li>Account, who sends this command in transaction, has role with permission to create domain</li>
<li>Role, which will be assigned to created user by default</li>
</ol>
<h2 id='create-role'>Create role</h2><h3 id='purpose-8'>Purpose</h3>
<p>The purpose of <em>create role</em> command is to create new role in the system from the set of permissions.
Combining different permissions into roles, maintainers of Iroha peer network can create customized security model.</p>
<h3 id='structure-8'>Structure</h3><pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">CreateRole</span> <span class="p">{</span>
   <span class="kt">string</span> <span class="na">role_name</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="k">repeated</span> <span class="kt">string</span> <span class="na">permissions</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"commands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"command_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CreateRole"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"role_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MoneyCreator"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"permissions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"CanAddAssetQuantity"</span><span class="p">,</span><span class="w">
                </span><span class="err">…</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w"> </span><span class="err">…</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Role name</td>
<td>name of role to create</td>
<td><code>[A-Za-z0-9_]{1,7}</code></td>
</tr>
<tr>
<td>Permissions</td>
<td>array of already existent permissions</td>
<td>set of passed permissions is fully included into set of existing permissions</td>
</tr>
</tbody></table>
<h3 id='validation-8'>Validation</h3>
<ol>
<li>Set of passed permissions is fully included into set of existing permissions</li>
</ol>
<h2 id='detach-role'>Detach role</h2><h3 id='purpose-9'>Purpose</h3>
<p>The purpose of <em>detach role</em> command is to detach a role from the set of roles of an account.
By executing this command it is possible to decrease the number of possible actions in the system for the user.</p>
<h3 id='structure-9'>Structure</h3><pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">DetachRole</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="na">account_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">string</span> <span class="na">role_name</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"commands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"command_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DetachRole"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@test"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"role_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w"> </span><span class="err">…</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Account ID</td>
<td>ID of account where role will be deleted</td>
<td>already existent, account_name@domain</td>
</tr>
<tr>
<td>Role name</td>
<td>detached role</td>
<td>existing role</td>
</tr>
</tbody></table>
<h3 id='validation-9'>Validation</h3>
<ol>
<li>Role exists in the system</li>
<li>Account has such role</li>
</ol>
<h2 id='grant-permission'>Grant permission</h2><h3 id='purpose-10'>Purpose</h3>
<p>The purpose of <em>grant permission</em> command is to give another account rights to perform actions over the account of transaction sender (give someone right to do something with my account).</p>
<h3 id='structure-10'>Structure</h3><pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">GrantPermission</span> <span class="p">{</span>
   <span class="kt">string</span> <span class="na">account_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="kt">string</span> <span class="na">permission_name</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"commands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"command_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GrantPermission"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"takemiya@soramitsu"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"permission_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CanAddAssetQuantity"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w"> </span><span class="err">…</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Account ID</td>
<td>id of account whom rights are granted</td>
<td>already existent, account_name@domain</td>
</tr>
<tr>
<td>Permission name</td>
<td>name of granted permission</td>
<td>permission is defined</td>
</tr>
</tbody></table>
<h3 id='validation-10'>Validation</h3>
<ol>
<li>Account exists</li>
<li>Transaction creator is allowed to grant this permission</li>
</ol>
<h2 id='remove-signatory'>Remove signatory</h2><h3 id='purpose-11'>Purpose</h3>
<p>Purpose of <em>remove signatory</em> command is to remove public key, associated with an identity, from an account</p>
<h3 id='structure-11'>Structure</h3><pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">RemoveSignatory</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="na">account_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">bytes</span> <span class="na">public_key</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"commands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"command_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RemoveSignatory"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"takemiya@test"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"public_key"</span><span class="p">:</span><span class="w"> </span><span class="err">string(</span><span class="mi">64</span><span class="err">)</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w"> </span><span class="err">…</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Account ID</td>
<td>ID of account to delete signatory from</td>
<td>already existent, account_name@domain</td>
</tr>
<tr>
<td>Public key</td>
<td>Signatory to delete</td>
<td>ed25519 public key</td>
</tr>
</tbody></table>
<h3 id='validation-11'>Validation</h3>
<p>When signatory is deleted, we should check if invariant of <strong>size(signatories) &gt;= quorum</strong> holds.
Signatory should have been previously added to the account</p>

<p>Two cases:
Case 1. When transaction creator wants to remove signatory from their account and he or she has permission CanRemoveSignatory
Case 2. CanRemoveSignatory was granted to transaction creator</p>
<h2 id='revoke-permission'>Revoke permission</h2><h3 id='purpose-12'>Purpose</h3>
<p>The purpose of <em>revoke permission</em> command is to revoke or dismiss given granted permission from another account in the network.</p>
<h3 id='structure-12'>Structure</h3><pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">RevokePermission</span> <span class="p">{</span>
   <span class="kt">string</span> <span class="na">account_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="kt">string</span> <span class="na">permission_name</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"commands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"command_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RevokePermission"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"takemiya@soramitsu"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"permission_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CanAddAssetQuantity"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w"> </span><span class="err">…</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Account ID</td>
<td>id of account whom rights were granted</td>
<td>already existent, account_name@domain</td>
</tr>
<tr>
<td>Permission name</td>
<td>name of revoked permission</td>
<td>permission is defined</td>
</tr>
</tbody></table>
<h3 id='validation-12'>Validation</h3>
<ol>
<li>Transaction creator should have previously granted this permission to target account</li>
</ol>
<h2 id='set-account-detail'>Set account detail</h2><h3 id='purpose-13'>Purpose</h3>
<p>Purpose of <em>set account detail</em> command is to set key-value information for a given account</p>
<h3 id='structure-13'>Structure</h3><pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">SetAccountDetail</span><span class="p">{</span>
    <span class="kt">string</span> <span class="na">account_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">string</span> <span class="na">key</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kt">string</span> <span class="na">value</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"commands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"command_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SetAccountDetail"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"takemiya@soramitsu"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"position"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Co-CEO"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w"> </span><span class="err">…</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Account ID</td>
<td>id of account whom key-value information was set</td>
<td>already existent, account_name@domain</td>
</tr>
<tr>
<td>Key</td>
<td>key of information being set</td>
<td><code>[A-Za-z0-9_]{1,}</code></td>
</tr>
<tr>
<td>Value</td>
<td>value of corresponding key</td>
<td>-</td>
</tr>
</tbody></table>
<h3 id='validation-13'>Validation</h3>
<p>Two cases:
Case 1. When transaction creator wants to set account detail to his/her account and he or she has permission CanSetAccountInfo
Case 2. CanSetAccountInfo was granted to transaction creator</p>
<h2 id='set-account-quorum'>Set account quorum</h2><h3 id='purpose-14'>Purpose</h3>
<p>The purpose of <em>set account quorum</em> command is to set the number of signatories required to confirm the identity of user, who creates the transaction. Use case scenario is to set the number of different users, utilizing single account, to sign off the transaction.</p>
<h3 id='structure-14'>Structure</h3><pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">SetAccountQuorum</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="na">account_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">uint32</span> <span class="na">quorum</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"commands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"command_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SetAccountQuorum"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"takemiya@test"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"quorum"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w"> </span><span class="err">…</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Account ID</td>
<td>ID of account to set quorum</td>
<td>already existent, account_name@domain</td>
</tr>
<tr>
<td>Quorum</td>
<td>number of signatories needed to be included with a transaction from this account</td>
<td>0 &lt; quorum &lt; 10</td>
</tr>
</tbody></table>
<h3 id='validation-14'>Validation</h3>
<p>When quorum is set, it is checked if invariant of <strong>size(signatories) &gt;= quorum</strong> holds.</p>

<p>Two cases:
Case 1. When transaction creator wants to set quorum for his/her account and he or she has permission CanRemoveSignatory
Case 2. CanRemoveSignatory was granted to transaction creator</p>
<h2 id='subtract-asset-quantity'>Subtract asset quantity</h2><h3 id='purpose-15'>Purpose</h3>
<p>The purpose of <em>subtract asset quantity</em> command is the opposite of AddAssetQuantity commands — to decrease the number of assets on account of transaction creator. </p>
<h3 id='structure-15'>Structure</h3><pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">AddAssetQuantity</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="na">account_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">string</span> <span class="na">asset_id</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">Amount</span> <span class="na">amount</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">message</span> <span class="nc">uint256</span> <span class="p">{</span>
   <span class="kt">uint64</span> <span class="na">first</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="kt">uint64</span> <span class="na">second</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
   <span class="kt">uint64</span> <span class="na">third</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
   <span class="kt">uint64</span> <span class="na">fourth</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">message</span> <span class="nc">Amount</span> <span class="p">{</span>
   <span class="n">uint256</span> <span class="na">value</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="kt">uint32</span> <span class="na">precision</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>

</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"commands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"command_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SubtractAssetQuantity"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@test"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"asset_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coin#test"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="err">string</span><span class="p">,</span><span class="w">
                </span><span class="s2">"precision"</span><span class="p">:</span><span class="w"> </span><span class="err">int</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w"> </span><span class="err">…</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Account ID</td>
<td>account id from which to subtract asset</td>
<td>account_name@domain</td>
</tr>
<tr>
<td>Asset ID</td>
<td>id of the asset</td>
<td>asset#account</td>
</tr>
<tr>
<td>Amount</td>
<td>positive amount of the asset to add</td>
<td>&gt; 0</td>
</tr>
</tbody></table>
<h3 id='validation-15'>Validation</h3>
<ol>
<li>Asset and account should exist</li>
<li>Added quantity precision should be equal to asset precision</li>
<li>Creator of transaction should have role which has permissions for subtraction of assets</li>
<li>Creator of transaction subtracts account quantity in his/her account only</li>
</ol>
<h2 id='transfer-asset'>Transfer asset</h2><h3 id='purpose-16'>Purpose</h3>
<p>The purpose of <em>transfer asset</em> command is to share assets within the account in peer network: in the way that source account transfers assets to target account.</p>
<h3 id='structure-16'>Structure</h3><pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">TransferAsset</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="na">src_account_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">string</span> <span class="na">dest_account_id</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kt">string</span> <span class="na">asset_id</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="kt">string</span> <span class="na">description</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
    <span class="n">Amount</span> <span class="na">amount</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="p">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"commands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"command_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TransferAsset"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"src_account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"takemiya@test"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dest_account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nikolai@test"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"asset_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coin#test"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Salary payment"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"int_part"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
                </span><span class="s2">"precision"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w"> </span><span class="err">…</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Source account ID</td>
<td>ID of account to withdraw asset from</td>
<td>already existent, account_name@domain</td>
</tr>
<tr>
<td>Destination account ID</td>
<td>ID of account to send asset at</td>
<td>already existent, account_name@domain</td>
</tr>
<tr>
<td>Asset ID</td>
<td>ID of asset to use</td>
<td>already existent, asset_name#domain</td>
</tr>
<tr>
<td>Description</td>
<td>Message to attach to transfer</td>
<td>No constraints</td>
</tr>
<tr>
<td>Amount</td>
<td>amount of asset to transfer</td>
<td>0 &lt; amount &lt; max_uint256</td>
</tr>
</tbody></table>
<h3 id='validation-16'>Validation</h3>
<ol>
<li>Source account has this asset in its AccountHasAsset relation</li>
<li>An amount is a positive number and asset precision is consistent with the asset definition</li>
<li>Source account has enough amount of asset to transfer and is not zero</li>
<li>Source account can transfer money, and destination account can receive money (their roles have these permissions)</li>
</ol>
<h1 id='queries'>Queries</h1><h2 id='query-structure'>Query structure</h2><pre class="highlight protobuf tab-protobuf"><code> <span class="kd">message</span> <span class="nc">Query</span> <span class="p">{</span>
  <span class="kd">message</span> <span class="nc">Payload</span> <span class="p">{</span>
    <span class="kt">uint64</span> <span class="na">created_time</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">string</span> <span class="na">creator_account_id</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
     <span class="k">oneof</span> <span class="n">query</span> <span class="p">{</span>
       <span class="n">GetAccount</span> <span class="na">get_account</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
       <span class="n">GetSignatories</span> <span class="na">get_account_signatories</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
       <span class="n">GetAccountTransactions</span> <span class="na">get_account_transactions</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
       <span class="n">GetAccountAssetTransactions</span> <span class="na">get_account_asset_transactions</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
       <span class="n">GetTransactions</span> <span class="na">get_transactions</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
       <span class="n">GetAccountAssets</span> <span class="na">get_account_assets</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>
       <span class="n">GetRoles</span> <span class="na">get_roles</span> <span class="o">=</span> <span class="mi">9</span><span class="p">;</span>
       <span class="n">GetRolePermissions</span> <span class="na">get_role_permissions</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
       <span class="n">GetAssetInfo</span> <span class="na">get_asset_info</span> <span class="o">=</span> <span class="mi">11</span><span class="p">;</span>
     <span class="p">}</span>
     <span class="c1">// used to prevent replay attacks.
</span>     <span class="kt">uint64</span> <span class="na">query_counter</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="n">Payload</span> <span class="na">payload</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="n">Signature</span> <span class="na">signature</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<p>Each query consists of the following fields:
<ol>
    <li> Payload, which contains created time, id of account creator, query counter and a query object</li>
    <li> Signature, which signs payload </li>
</ol></p>

<p><strong>Payload</strong> stores everything except signatures:
<ul>
    <li> <strong>Time of creation</strong> (unix time, in milliseconds) </li>
    <li> <strong>Creator account_id</strong> stores account id in form username@domain  </li>
    <li> <strong>Query counter</strong> is used to prevent replay attack and it is formed on client side </li>
    <li> <strong>Query object</strong> might be of any type, described below </li>
</ul></p>

<p><strong>Signatures</strong> contain one or many signatures (<a href="https://ed25519.cr.yp.to">ed25519</a> pubkey + signature).</p>
<h2 id='validation'>Validation</h2>
<p>The validation for all commands includes:</p>

<ul>
<li>timestamp — should not be older than 24 hours from the peer&#39;s time</li>
<li>signature of query creator — used for checking the identity of query creator</li>
<li>query counter — checked to be incremented with every subsequent query from query creator</li>
<li>roles — depending on the query creator&#39;s role, it can be applied to the same account, account in the domain, in the whole system or not allowed at all</li>
</ul>
<h2 id='get-account'>Get account</h2><h3 id='purpose'>Purpose</h3>
<p>Purpose of <em>get account</em> query is to get the state of an account.</p>

<p>This Query returns <code>AccountResponse</code>, which contains array with roles of the account and <code>Account</code> object with following fields:
<ul>
    <li>account_id </li>
    <li>domain_name </li>
    <li>permissions object </li>
    <li>quorum — the quantity of signatures to pass within transaction to execute commands for this account </li>
</ul></p>
<h3 id='structure'>Structure</h3><h4 id='query'>Query</h4>
<blockquote>
<p>Query</p>
</blockquote>
<pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">GetAccount</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="na">account_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"signature"</span><span class="p">:</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"pubkey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"…"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"…"</span><span class="w">
        </span><span class="p">},</span><span class="w">
    </span><span class="s2">"created_ts"</span><span class="p">:</span><span class="w"> </span><span class="err">…</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creator_account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin@test"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"query_counter"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"query_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"GetAccount"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@test"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Account ID</td>
<td>account id to request its state</td>
<td>username@domain</td>
</tr>
</tbody></table>
<h4 id='response'>Response</h4>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">AccountResponse</span> <span class="p">{</span>
    <span class="n">Account</span> <span class="na">account</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">repeated</span> <span class="kt">string</span> <span class="na">account_roles</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">message</span> <span class="nc">Account</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="na">account_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">string</span> <span class="na">domain_id</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kt">uint32</span> <span class="na">quorum</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="kt">string</span> <span class="na">json_data</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Account ID</td>
<td>account id</td>
<td>username@domain</td>
</tr>
<tr>
<td>Domain ID</td>
<td>domain of account id</td>
<td><code>[A-Za-z0-9]{1,9}</code></td>
</tr>
<tr>
<td>Quorum</td>
<td>number of signatories needed to sign the transaction to make it valid</td>
<td>integer</td>
</tr>
<tr>
<td>json_data</td>
<td>key-value information</td>
<td>properly formed json information</td>
</tr>
</tbody></table>
<h2 id='get-signatories'>Get signatories</h2><h3 id='purpose-2'>Purpose</h3>
<p>Purpose of <em>get signatories</em> query is to get signatories, which act as an identity of the account.</p>

<p>This Query returns <code>SignatoriesResponse</code>, which is one or many public <a href="https://ed25519.cr.yp.to">ed25519</a> keys.</p>
<h3 id='structure-2'>Structure</h3><h4 id='query-2'>Query</h4>
<blockquote>
<p>Query</p>
</blockquote>
<pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">GetSignatories</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="na">account_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"signature"</span><span class="p">:</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"pubkey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"…"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"…"</span><span class="w">
        </span><span class="p">},</span><span class="w">
    </span><span class="s2">"created_ts"</span><span class="p">:</span><span class="w"> </span><span class="err">…</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creator_account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin@test"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"query_counter"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"query_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"GetSignatories"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@test"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Account ID</td>
<td>account id to request signatories</td>
<td>username@domain</td>
</tr>
</tbody></table>
<h4 id='response-2'>Response</h4>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">SignatoriesResponse</span> <span class="p">{</span>
    <span class="k">repeated</span> <span class="kt">bytes</span> <span class="na">keys</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Keys</td>
<td>an array of public keys</td>
<td><a href="https://ed25519.cr.yp.to">ed25519</a></td>
</tr>
</tbody></table>
<h2 id='get-account-transactions'>Get account transactions</h2><h3 id='purpose-3'>Purpose</h3>
<p>In a case when a list of transactions per account is needed, <code>GetAccountTransactions</code> query can be formed.</p>

<p>This Query returns <code>TransactionsResponse</code>, which is a collection of transactions.</p>
<h3 id='structure-3'>Structure</h3><h4 id='query-3'>Query</h4>
<blockquote>
<p>Query</p>
</blockquote>
<pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">GetAccountTransactions</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="na">account_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"signature"</span><span class="p">:</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"pubkey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"…"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"…"</span><span class="w">
        </span><span class="p">},</span><span class="w">
    </span><span class="s2">"created_ts"</span><span class="p">:</span><span class="w"> </span><span class="err">…</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creator_account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin@test"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"query_counter"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"query_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"GetAccountTransactions"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@test"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Account ID</td>
<td>account id to request transactions from</td>
<td>username@domain</td>
</tr>
</tbody></table>
<h4 id='response-3'>Response</h4>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">TransactionsResponse</span> <span class="p">{</span>
    <span class="k">repeated</span> <span class="n">Transaction</span> <span class="na">transactions</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Transactions</td>
<td>an array of transactions for given account</td>
<td>Committed transaction</td>
</tr>
</tbody></table>
<h2 id='get-account-asset-transactions'>Get account asset transactions</h2><h3 id='purpose-4'>Purpose</h3>
<p><code>GetAccountAssetTransactions</code> query returns all transactions associated with given account and asset</p>

<p>This Query returns <code>TransactionsResponse</code>, which is a collection of transactions.</p>
<h3 id='structure-4'>Structure</h3><h4 id='query-4'>Query</h4>
<blockquote>
<p>Query</p>
</blockquote>
<pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">GetAccountAssetTransactions</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="na">account_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">string</span> <span class="na">asset_id</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"signature"</span><span class="p">:</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"pubkey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"…"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"…"</span><span class="w">
        </span><span class="p">},</span><span class="w">
    </span><span class="s2">"created_ts"</span><span class="p">:</span><span class="w"> </span><span class="err">…</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creator_account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin@test"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"query_counter"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"query_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"GetAccountAssetTransactions"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@test"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"asset_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coin#test"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Account ID</td>
<td>account id to request transactions from</td>
<td>username@domain</td>
</tr>
<tr>
<td>Asset ID</td>
<td>asset id in order to filter transactions containing this asset</td>
<td>asset_name#domain</td>
</tr>
</tbody></table>
<h4 id='response-4'>Response</h4>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">TransactionsResponse</span> <span class="p">{</span>
    <span class="k">repeated</span> <span class="n">Transaction</span> <span class="na">transactions</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Transactions</td>
<td>an array of transactions for given account and asset</td>
<td>Committed transactions</td>
</tr>
</tbody></table>
<h2 id='get-transactions'>Get transactions</h2><h3 id='purpose-5'>Purpose</h3>
<p><code>GetTransactions</code> is used for retrieving information about transactions, based on their hashes.</p>

<p>This Query returns <code>TransactionsResponse</code>, which is a collection of transactions.</p>
<h3 id='structure-5'>Structure</h3><h4 id='query-5'>Query</h4>
<blockquote>
<p>Query</p>
</blockquote>
<pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">GetTransactions</span> <span class="p">{</span>
    <span class="k">repeated</span> <span class="kt">bytes</span> <span class="na">tx_hashes</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"signature"</span><span class="p">:</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"pubkey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"…"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"…"</span><span class="w">
        </span><span class="p">},</span><span class="w">
    </span><span class="s2">"created_ts"</span><span class="p">:</span><span class="w"> </span><span class="err">…</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creator_account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin@test"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"query_counter"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"query_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"GetTransactions"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tx_hashes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">string(</span><span class="mi">64</span><span class="err">)</span><span class="p">,</span><span class="err">…</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Transactions hashes</td>
<td>transactions&#39; hashes to request transactions from</td>
<td>(proto) array of 32 bytes, (json) 64 size of hex strings</td>
</tr>
</tbody></table>
<h4 id='response-5'>Response</h4>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">TransactionsResponse</span> <span class="p">{</span>
    <span class="k">repeated</span> <span class="n">Transaction</span> <span class="na">transactions</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Transactions</td>
<td>an array of transactions for given account and asset</td>
<td>Committed transactions</td>
</tr>
</tbody></table>
<h2 id='get-account-assets'>Get account assets</h2><h3 id='purpose-6'>Purpose</h3>
<p>To know the state of an asset per account (balance), <code>GetAccountAssets</code> query can be formed.</p>

<p>This Query returns <code>AccountAssetResponse</code>.</p>
<h3 id='structure-6'>Structure</h3><h4 id='query-6'>Query</h4>
<blockquote>
<p>Query</p>
</blockquote>
<pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">GetAccountAssets</span> <span class="p">{</span>
 <span class="kt">string</span> <span class="na">account_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
 <span class="kt">string</span> <span class="na">asset_id</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"signature"</span><span class="p">:</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"pubkey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"…"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"…"</span><span class="w">
        </span><span class="p">},</span><span class="w">
    </span><span class="s2">"created_ts"</span><span class="p">:</span><span class="w"> </span><span class="err">…</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creator_account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin@test"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"query_counter"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"query_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"GetAccountAssets"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@test"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"asset_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coin#test"</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Account ID</td>
<td>account id to request balance from</td>
<td>username@domain</td>
</tr>
<tr>
<td>Asset ID</td>
<td>asset id to know its balance</td>
<td>asset_name#domain</td>
</tr>
</tbody></table>
<h4 id='response-6'>Response</h4>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">AccountAsset</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="na">asset_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">string</span> <span class="na">account_id</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">Amount</span> <span class="na">balance</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">message</span> <span class="nc">AccountAssetResponse</span> <span class="p">{</span>
    <span class="n">AccountAsset</span> <span class="na">account_asset</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Asset ID</td>
<td>identifier of asset used for checking the balance</td>
<td>asset_name#domain</td>
</tr>
<tr>
<td>Account ID</td>
<td>account which has this balance</td>
<td>username@domain</td>
</tr>
<tr>
<td>Balance</td>
<td>balance of asset</td>
<td>&gt; 0</td>
</tr>
</tbody></table>
<h2 id='get-asset-info'>Get asset info</h2><h3 id='purpose-7'>Purpose</h3>
<p>In order to know precision for given asset, and other related info in the future, such as a description of the asset, etc. user can send <code>GetAssetInfo</code> query.</p>

<p>This Query returns <code>AssetResponse</code> with an information about the asset.</p>
<h3 id='structure-7'>Structure</h3><h4 id='query-7'>Query</h4>
<blockquote>
<p>Query</p>
</blockquote>
<pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">GetAssetInfo</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="na">asset_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"signature"</span><span class="p">:</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"pubkey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"…"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"…"</span><span class="w">
        </span><span class="p">},</span><span class="w">
    </span><span class="s2">"created_ts"</span><span class="p">:</span><span class="w"> </span><span class="err">…</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creator_account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin@test"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"query_counter"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"query_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"GetAssetInfo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"asset_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coin#test"</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Asset ID</td>
<td>asset id to know related information</td>
<td>asset_name#domain</td>
</tr>
</tbody></table>
<h4 id='response-7'>Response</h4>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">AssetResponse</span> <span class="p">{</span>
<span class="n">Asset</span> <span class="na">asset</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">message</span> <span class="nc">Asset</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="na">asset_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">string</span> <span class="na">domain_id</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kt">uint32</span> <span class="na">precision</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Asset ID</td>
<td>asset id to get information about</td>
<td><code>[A-Za-z0-9]{1,9}</code></td>
</tr>
<tr>
<td>Domain ID</td>
<td>domain related to this asset</td>
<td><code>[A-Za-z0-9]{1,9}</code></td>
</tr>
<tr>
<td>Precision</td>
<td>number of digits after comma</td>
<td>uint8_t</td>
</tr>
</tbody></table>
<h2 id='get-roles'>Get roles</h2><h3 id='purpose-8'>Purpose</h3>
<p>To get existing roles in the system, a user can send <code>GetRoles</code> query to Iroha network.</p>

<p>This Query returns <code>RolesResponse</code> containing an array of existing roles.</p>
<h3 id='structure-8'>Structure</h3><h4 id='query-8'>Query</h4>
<blockquote>
<p>Query</p>
</blockquote>
<pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">GetRoles</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"signature"</span><span class="p">:</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"pubkey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"…"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"…"</span><span class="w">
        </span><span class="p">},</span><span class="w">
    </span><span class="s2">"created_ts"</span><span class="p">:</span><span class="w"> </span><span class="err">…</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creator_account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin@test"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"query_counter"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"query_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"GetRoles"</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h4 id='response-8'>Response</h4>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">RolesResponse</span> <span class="p">{</span>
    <span class="k">repeated</span> <span class="kt">string</span> <span class="na">roles</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Roles</td>
<td>array of created roles in the network</td>
<td>vector of strings describing existing roles in the system</td>
</tr>
</tbody></table>
<h2 id='get-role-permissions'>Get role permissions</h2><h3 id='purpose-9'>Purpose</h3>
<p>To get available permissions per role in the system, a user can send <code>GetRolePermissions</code> query to Iroha network.</p>

<p>This Query returns <code>RolePermissionsResponse</code> containing an array of permissions related to the role.</p>
<h3 id='structure-9'>Structure</h3><h4 id='query-9'>Query</h4>
<blockquote>
<p>Query</p>
</blockquote>
<pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">GetRolePermissions</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="na">role_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"signature"</span><span class="p">:</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"pubkey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"…"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"…"</span><span class="w">
        </span><span class="p">},</span><span class="w">
    </span><span class="s2">"created_ts"</span><span class="p">:</span><span class="w"> </span><span class="err">…</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creator_account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin@test"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"query_counter"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"query_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"GetRolePermissions"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"role_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"MoneyCreator"</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Role ID</td>
<td>role to get permissions for</td>
<td>string describing role existing in the system</td>
</tr>
</tbody></table>
<h4 id='response-9'>Response</h4>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight protobuf tab-protobuf"><code><span class="kd">message</span> <span class="nc">RolePermissionsResponse</span> <span class="p">{</span>
    <span class="k">repeated</span> <span class="kt">string</span> <span class="na">permissions</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Constraint</th>
</tr>
</thead><tbody>
<tr>
<td>Permissions</td>
<td>array of permissions related to the role</td>
<td>string of permissions related to the role</td>
</tr>
</tbody></table>
<h1 id='entity-relationship-model'>Entity-relationship model</h1>
<p>This section describes the contents of World State View, or in other words — the state of entities as per the latest block in the chain.</p>

<p><img src="images/er-model.png" title="Entity-relationship model" alt="ER Model" /></p>
<h2 id='peer'>Peer</h2>
<ul>
<li>address — network address and internal port, is used for synchronization, consensus, and communication with the ordering service</li>
<li>public_key — key, which will be used for signing blocks during consensus process</li>
</ul>
<h2 id='asset'>Asset</h2>
<ul>
<li>asset_id — identifier of asset, formatted as asset_name#domain_id</li>
<li>domain_id — identifier of domain, where the asset was created, references existing domain</li>
<li>precision — size of fractional part</li>
<li>data — JSON with arbitrary structure of asset description</li>
</ul>
<h2 id='signatory'>Signatory</h2>
<ul>
<li>public_key — a public key</li>
</ul>
<h2 id='domain'>Domain</h2>
<ul>
<li>domain_id — identifier of a domain</li>
<li>default_role — a default role per user created in the domain, references existing role</li>
</ul>
<h2 id='role'>Role</h2>
<ul>
<li>role_id — identifier of role</li>
</ul>
<h3 id='rolehaspermissions'>RoleHasPermissions</h3>
<ul>
<li>role_id — identifier of role, references existing role</li>
<li>permission_id — an id of predefined role</li>
</ul>
<h2 id='account'>Account</h2>
<ul>
<li>account_id — identifier of account, formatted as account_name@domain_id</li>
<li>domain_id — identifier of domain where the account was created, references existing domain </li>
<li>quorum — number of signatories required for creation of valid transaction from this account</li>
<li>transaction_count – counter of transactions created by this account</li>
<li>data — key-value storage for any information, related to the account</li>
</ul>
<h3 id='accounthassignatory'>AccountHasSignatory</h3>
<ul>
<li>account_id — identifier of account, references existing account </li>
<li>public_key — a public key (which is also called signatory), references existing signatory</li>
</ul>
<h3 id='accounthasasset'>AccountHasAsset</h3>
<ul>
<li>account_id — identifier of account, references existing account </li>
<li>asset_id — identifier of asset, references existing asset</li>
<li>amount — an amount of the asset, belonging to the account</li>
</ul>
<h3 id='accounthasroles'>AccountHasRoles</h3>
<ul>
<li>account_id — identifier of account, references existing account </li>
<li>role_id — identifier of role, references existing role</li>
</ul>
<h3 id='accounthasgrantablepermissions'>AccountHasGrantablePermissions</h3>
<ul>
<li>account_id — identifier of account, references existing account. This account gives grantable permission to perform operation over itself to permittee.</li>
<li>permittee_account_id — identifier of account, references existing account. This account is given permission to perform operation over account_id.</li>
<li>permission_id — identifier of grantable_permission</li>
</ul>
<h1 id='command-line-interface'>Command Line Interface</h1>
<p>Iroha Command Line Interface (CLI) is a tool for creation of transaction containing commands from the command line, or sending queries to Iroha. It is intended to simplify interaction between the client side and Iroha peer. CLI could be also used for keypair generation.</p>

<p>Interactive mode of cli in a nutshell represents number of steps, where at each step user must interact with the system. 
To choose one of the options can type short name of the command specified in parentheses, or number of the command in the menu.</p>
<h2 id='keypair-generation'>Keypair generation</h2>
<p>To generate files containing private and public keys <code>--new_account</code> flag should be used.</p>

<p>Example:
<code>bash
iroha-cli --new_account --account_name alice@ru --pass_phrase mysupersecretpassword --key_path ./
</code></p>

<p>After that <code>alice@ru.priv</code> and <code>alice@ru.pub</code> files will be generated in the <code>key_path</code> folder. By default <code>key_path</code> if not specified is the folder where iroha-cli has been launched.</p>
<h2 id='interactive-mode'>Interactive mode </h2>
<p>Run: 
<code class="bash"> iroha-cli --interactive --account_name your_account_id --key_path /path/to/keys </code></p>

<p>Your <code>account_id</code> is used as the creator of the queries and transactions for signing up messages with accounts keys and fill up counters. 
You can specify the location of the keypairs associated with the <code>account_id</code> using <code>key_path</code> flag. By default, current folder is used.</p>
<h2 id='starting-menu'>Starting menu </h2>
<p>At the start of cli user has two possible modes:</p>

<ul>
<li>Start a transaction</li>
<li>Start a query</li>
<li>Get status of a transaction</li>
</ul>

<p><img src="images/cli/image.png" alt="image" /></p>
<h2 id='transaction-cli'>Transaction CLI</h2>
<p>Start up of transaction cli will trigger the creation of a new transaction.
Each transaction consists of commands, being equal or less than <strong>65000</strong>. User is offered to add commands to the new transaction.
All meta data of the transaction will be filled automatically (signature, tx_counter, creator account, timestamp).
Currently, following Iroha commands are supported in Interactive CLI:</p>

<p><img src="images/cli/image-2.png" alt="image-2" /></p>

<p>Back option will switch back to main menu. 
To add command to the transaction there are two options:
<ol> 
    <li> Type number of the command in the menu, or command name without parameters: 
    This will iterate through the parameters of the command and ask user to type the parameter value. 
    For example typing &quot;9&quot; will create <code>set account quorum</code> command, and ask to type <code>account id</code> and <code>quorum</code>:
    <img src="images/cli/image-3.png" alt="image-3" /> </li> </p>

<p><li> Type command name with all needed parameters . 
    This option can be used to quickly add command to transaction. For example typing: 
    <code>set_qrm test@test 2</code> - will create Set_Account_Quorum command for account: <code>test@test</code> and quorum: 2. </li> 
</ol></p>

<p>After adding the command, result menu will be printed:  
<img src="images/cli/image-4.png" alt="image-4" /></p>

<ol>

    <li> User can add more commands to the same transaction </li>  
    <li> User can send to Iroha peer </li>
    <li> Go back and create new transaction (this will delete previous transaction) </li>
    <li> Save transaction as json file locally </li>
</ol>
<h2 id='query-cli'>Query CLI</h2>
<p>Interactive query cli is build similarly as Transaction CLI.
Query meta data will be assigned automatically (query_counter, time_stamp,  creator_account, signature)
Currently, interactive cli supports the following queries:</p>

<p><img src="images/cli/image-5.png" alt="image-5" /></p>

<p>For each query there two possible modes to run: 
<ol>
    <li> By typing appropriate number of query, either the corresponding abbreviation specified in parentheses. </li>
    <li> Typing the command abbreviation with appropriated parameters. </li>
</ol> </p>

<p>After query is formed there are following options:
<ul> 
    <li>Save query as json </li>
    <li>Send to Iroha Peer and receive QueryResponse </li>
    <li>Back option, will return to query choice menu and remove current query. </li>
</ul></p>

<p><img src="images/cli/image-6.png" alt="image-6" /></p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="protobuf">protobuf</a>
                <a href="#" data-language-name="json">json</a>
          </div>
      </div>
    </div>
    <button class="js-gitter-toggle-chat-button" data-gitter-toggle-chat-state="true">Open Chat</button>
    </body>
</html>
